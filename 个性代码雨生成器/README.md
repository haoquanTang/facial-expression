# 个性代码雨生成器

一个仿《黑客帝国》风格的代码雨动态特效工具，支持用户自定义参数并导出动画。

## 功能特性

### 🎨 基础特效
- 黑色背景上的绿色字符下落动画
- 流畅的代码雨效果，支持字符渐变和拖尾
- 响应式设计，自适应不同屏幕尺寸

### ⚙️ 自定义参数
- **字符集选择**：英文字符、中文字符、数字、混合字符、矩阵字符
- **颜色调整**：字符颜色、背景颜色自定义
- **动画控制**：下落速度、字符密度、透明度调节
- **水印功能**：可添加自定义文字水印，支持左上角/右下角位置

### 📸 导出功能
- **截图保存**：一键保存当前画面为PNG格式
- **GIF录制**：支持录制10秒内的GIF动画
- **实时预览**：所有参数调整实时生效

### 🎮 交互控制
- **键盘快捷键**：
  - `空格键`：暂停/继续动画
  - `F键`：切换全屏模式
  - `S键`：快速截图
- **控制面板**：可隐藏/显示的参数控制界面
- **一键重置**：快速恢复默认参数

## 使用说明

### 快速开始
1. 打开 `index.html` 文件
2. 代码雨动画将自动开始播放
3. 点击右上角的齿轮图标打开控制面板
4. 根据需要调整各项参数

### 参数说明

#### 字符设置
- **英文字符**：A-Z, a-z 标准英文字母
- **中文字符**：常用汉字字符集
- **数字**：0-9 数字字符
- **混合字符**：英文+数字+特殊符号
- **矩阵字符**：日文片假名+英文+数字（最接近电影效果）

#### 颜色设置
- **字符颜色**：设置下落字符的颜色（默认：#00ff00 绿色）
- **背景颜色**：设置画布背景颜色（默认：#000000 黑色）

#### 动画参数
- **下落速度**：控制字符下落的快慢（范围：10-100）
- **字符密度**：控制屏幕上字符列的数量（范围：10-100）
- **透明度**：控制字符的透明程度（范围：10-100%）

#### 水印设置
- **水印文字**：输入要显示的水印内容
- **水印位置**：选择水印显示位置（无水印/左上角/右下角）

### 导出操作

#### 截图保存
1. 调整到满意的效果
2. 点击「截图保存」按钮或按 `S` 键
3. 图片将自动下载为PNG格式

#### GIF录制
1. 点击「录制GIF」按钮开始录制
2. 录制过程中按钮会闪烁提示
3. 点击「停止录制」或等待10秒自动停止
4. GIF文件将自动生成并下载

## 技术实现

### 技术栈
- **HTML5 Canvas**：图形渲染和动画绘制
- **原生JavaScript**：核心逻辑实现
- **Tailwind CSS**：界面样式设计
- **html2canvas**：截图功能实现
- **gif.js**：GIF动画生成

### 核心算法

#### 动画渲染循环
```javascript
// 使用requestAnimationFrame实现流畅动画
render() {
    // 1. 绘制半透明背景创建拖尾效果
    this.ctx.globalAlpha = 0.05;
    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
    
    // 2. 更新每列字符位置
    this.columns.forEach(column => {
        column.y += column.speed;
        // 字符渲染和随机变化逻辑
    });
    
    // 3. 继续下一帧
    if (this.isRunning) {
        requestAnimationFrame(() => this.render());
    }
}
```

#### 字符列管理
- 每列独立的下落速度和字符长度
- 动态字符生成和随机变化
- 头部字符高亮效果
- 渐变透明度实现拖尾

#### 性能优化
- Canvas局部重绘减少性能消耗
- 字符池复用避免频繁创建对象
- 屏幕外字符剔除优化渲染
- 响应式列数计算适配不同分辨率

## 文件结构

```
个性代码雨生成器/
├── index.html          # 主页面文件
├── matrix-rain.js      # 核心JavaScript逻辑
├── README.md          # 使用说明文档
└── 开发说明文档.md     # 开发需求文档
```

## 浏览器兼容性

- ✅ Chrome 60+
- ✅ Firefox 55+
- ✅ Safari 12+
- ✅ Edge 79+

## 性能建议

1. **最佳分辨率**：1920x1080及以下获得最佳性能
2. **参数调节**：高密度+高速度会增加CPU使用率
3. **录制建议**：GIF录制时建议降低密度以减少文件大小
4. **移动设备**：在移动设备上建议降低密度和透明度

## 自定义开发

### 添加新字符集
```javascript
// 在matrix-rain.js中的charsets对象添加
this.charsets.custom = '你的自定义字符集';
```

### 修改动画效果
```javascript
// 调整拖尾效果透明度
this.ctx.globalAlpha = 0.05; // 数值越小拖尾越长

// 修改字符大小
this.fontSize = 14; // 调整字符大小
```

### 扩展导出格式
- 可集成其他库支持MP4视频导出
- 添加SVG矢量图导出功能
- 实现批量截图功能

## 常见问题

**Q: GIF录制失败怎么办？**
A: 请确保浏览器支持Web Workers，建议使用Chrome浏览器。

**Q: 截图包含控制面板怎么办？**
A: 截图前先点击齿轮图标隐藏控制面板。

**Q: 动画卡顿怎么解决？**
A: 降低字符密度和透明度，或关闭其他占用资源的程序。

**Q: 如何获得最佳视觉效果？**
A: 推荐使用矩阵字符集，绿色字符，黑色背景，密度50-70。

## 更新日志

### v1.0.0 (2024-01-09)
- ✨ 初始版本发布
- ✨ 实现基础代码雨动画效果
- ✨ 支持多种字符集和颜色自定义
- ✨ 集成截图和GIF录制功能
- ✨ 添加水印和响应式设计
- ✨ 完整的键盘快捷键支持

## 许可证

本项目采用 MIT 许可证，详情请参阅 LICENSE 文件。

## 贡献

欢迎提交 Issue 和 Pull Request 来改进这个项目！

---

**享受你的代码雨之旅！** 🌧️💚