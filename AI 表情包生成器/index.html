<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 表情包生成器</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .hover-scale {
            transition: transform 0.2s ease;
        }
        .hover-scale:hover {
            transform: scale(1.05);
        }
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            max-width: 400px;
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        .fade-enter-active, .fade-leave-active {
            transition: opacity 0.3s;
        }
        .fade-enter-from, .fade-leave-to {
            opacity: 0;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <div id="app">
        <!-- 通知系统 -->
        <transition name="fade">
            <div v-if="notification.show" :class="['notification', 'p-4', 'rounded-lg', 'shadow-lg', 'text-white', notification.type === 'success' ? 'bg-green-500' : notification.type === 'error' ? 'bg-red-500' : 'bg-blue-500']">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <span v-if="notification.type === 'success'" class="mr-2">✅</span>
                        <span v-else-if="notification.type === 'error'" class="mr-2">❌</span>
                        <span v-else class="mr-2">ℹ️</span>
                        <span>{{ notification.message }}</span>
                    </div>
                    <button @click="hideNotification" class="ml-4 text-white hover:text-gray-200">
                        ✕
                    </button>
                </div>
            </div>
        </transition>

        <div class="container mx-auto px-4 py-8">
            <!-- 标题 -->
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-white mb-2">🎭 AI 表情包生成器</h1>
                <p class="text-white/80">让AI为你的聊天增添色彩</p>
            </div>

            <!-- 主要内容区域 -->
            <div class="max-w-6xl mx-auto">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- 左侧：输入和控制面板 -->
                    <div class="space-y-6">
                        <!-- 描述输入 -->
                        <div class="glass-effect rounded-xl p-6">
                            <h2 class="text-xl font-semibold text-white mb-4">📝 描述你想要的表情包</h2>
                            <textarea 
                                v-model="description" 
                                placeholder="例如：一只可爱的小猫咪在打字，表情很专注"
                                class="w-full h-24 p-3 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 resize-none"
                            ></textarea>
                        </div>

                        <!-- 风格选择 -->
                        <div class="glass-effect rounded-xl p-6">
                            <h2 class="text-xl font-semibold text-white mb-4">🎨 选择风格</h2>
                            <div class="grid grid-cols-2 gap-3">
                                <button 
                                    v-for="style in styleTemplates" 
                                    :key="style.id"
                                    @click="selectedStyle = style.id"
                                    :class="['p-3 rounded-lg text-left transition-all hover-scale', selectedStyle === style.id ? 'bg-blue-500 text-white' : 'bg-white/20 text-white hover:bg-white/30']"
                                >
                                    <div class="font-medium">{{ style.emoji }} {{ style.name }}</div>
                                    <div class="text-sm opacity-80">{{ style.description }}</div>
                                </button>
                            </div>
                        </div>

                        <!-- AI模型选择 -->
                        <div class="glass-effect rounded-xl p-6">
                            <h2 class="text-xl font-semibold text-white mb-4">🤖 AI模型选择</h2>
                            <div class="space-y-3">
                                <div v-for="model in aiModels" :key="model.id" class="flex items-center justify-between p-3 bg-white/10 rounded-lg">
                                    <div class="flex items-center">
                                        <input 
                                            type="checkbox" 
                                            :id="model.id" 
                                            v-model="selectedModels" 
                                            :value="model.id"
                                            class="mr-3 w-4 h-4 text-blue-600 rounded focus:ring-blue-500"
                                        >
                                        <label :for="model.id" class="text-white font-medium">{{ model.name }}</label>
                                    </div>
                                    <div class="text-sm text-white/70">{{ model.description }}</div>
                                </div>
                            </div>
                        </div>

                        <!-- 高级参数 -->
                        <div class="glass-effect rounded-xl p-6">
                            <h2 class="text-xl font-semibold text-white mb-4">⚙️ 高级参数</h2>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-white mb-2">图片尺寸</label>
                                    <select v-model="parameters.size" class="w-full p-2 rounded-lg border border-gray-300 focus:border-blue-500">
                                        <option value="512x512">512x512 (标准)</option>
                                        <option value="768x768">768x768 (高清)</option>
                                        <option value="1024x1024">1024x1024 (超高清)</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-white mb-2">采样步数: {{ parameters.steps }}</label>
                                    <input type="range" v-model="parameters.steps" min="10" max="50" class="w-full">
                                </div>
                                <div>
                                    <label class="block text-white mb-2">引导系数: {{ parameters.guidance }}</label>
                                    <input type="range" v-model="parameters.guidance" min="1" max="20" step="0.5" class="w-full">
                                </div>
                                <div>
                                    <label class="block text-white mb-2">负面提示词</label>
                                    <input 
                                        v-model="parameters.negativePrompt" 
                                        placeholder="例如：模糊、低质量、变形"
                                        class="w-full p-2 rounded-lg border border-gray-300 focus:border-blue-500"
                                    >
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 右侧：生成结果和操作 -->
                    <div class="space-y-6">
                        <!-- 生成按钮 -->
                        <div class="glass-effect rounded-xl p-6">
                            <div class="flex space-x-3">
                                <button 
                                    @click="generateSingleImage" 
                                    :disabled="isGenerating || !description.trim() || selectedModels.length === 0"
                                    class="flex-1 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg transition-colors flex items-center justify-center"
                                >
                                    <div v-if="isGenerating" class="loading-spinner mr-2"></div>
                                    {{ isGenerating ? '生成中...' : '生成图片' }}
                                </button>
                                <button 
                                    @click="generateParallelImages" 
                                    :disabled="isGenerating || !description.trim() || selectedModels.length < 2"
                                    class="flex-1 bg-purple-500 hover:bg-purple-600 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg transition-colors"
                                >
                                    并行生成对比
                                </button>
                            </div>
                        </div>

                        <!-- 生成结果展示 -->
                        <div class="glass-effect rounded-xl p-6">
                            <h2 class="text-xl font-semibold text-white mb-4">🖼️ 生成结果</h2>
                            
                            <!-- 单个结果 -->
                            <div v-if="generatedImage && !showParallelResults" class="text-center">
                                <div class="relative inline-block">
                                    <img :src="generatedImage" alt="生成的图片" class="max-w-full h-auto rounded-lg shadow-lg">
                                    <div v-if="imageQuality" class="absolute top-2 right-2 bg-black/70 text-white px-2 py-1 rounded text-sm">
                                        质量评分: {{ imageQuality }}/100
                                    </div>
                                </div>
                            </div>

                            <!-- 并行结果 -->
                            <div v-if="showParallelResults && parallelResults.length > 0" class="space-y-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div v-for="(result, index) in parallelResults" :key="index" class="relative">
                                        <div class="bg-white/10 rounded-lg p-3">
                                            <div class="text-white text-sm mb-2 flex justify-between items-center">
                                                <span>{{ result.modelName }}</span>
                                                <span class="bg-blue-500 px-2 py-1 rounded text-xs">{{ result.quality }}/100</span>
                                            </div>
                                            <img :src="result.image" alt="生成的图片" class="w-full h-auto rounded cursor-pointer hover:opacity-80" @click="selectParallelResult(index)">
                                        </div>
                                    </div>
                                </div>
                                <div class="text-center text-white/70 text-sm">
                                    点击图片选择最佳结果
                                </div>
                            </div>

                            <!-- 空状态 -->
                            <div v-if="!generatedImage && !showParallelResults" class="text-center text-white/60 py-12">
                                <div class="text-6xl mb-4">🎨</div>
                                <p>输入描述并选择模型开始生成</p>
                            </div>
                        </div>

                        <!-- 文字编辑 -->
                        <div v-if="generatedImage" class="glass-effect rounded-xl p-6">
                            <h2 class="text-xl font-semibold text-white mb-4">✏️ 添加文字</h2>
                            <div class="space-y-4">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-white mb-2">上方文字</label>
                                        <input v-model="textSettings.topText" placeholder="输入上方文字" class="w-full p-2 rounded border">
                                    </div>
                                    <div>
                                        <label class="block text-white mb-2">下方文字</label>
                                        <input v-model="textSettings.bottomText" placeholder="输入下方文字" class="w-full p-2 rounded border">
                                    </div>
                                </div>
                                <div class="grid grid-cols-3 gap-4">
                                    <div>
                                        <label class="block text-white mb-2">字体大小</label>
                                        <input type="range" v-model="textSettings.fontSize" min="20" max="80" class="w-full">
                                        <span class="text-white text-sm">{{ textSettings.fontSize }}px</span>
                                    </div>
                                    <div>
                                        <label class="block text-white mb-2">文字颜色</label>
                                        <input type="color" v-model="textSettings.color" class="w-full h-10 rounded">
                                    </div>
                                    <div>
                                        <label class="block text-white mb-2">阴影强度</label>
                                        <input type="range" v-model="textSettings.shadowBlur" min="0" max="10" class="w-full">
                                        <span class="text-white text-sm">{{ textSettings.shadowBlur }}px</span>
                                    </div>
                                </div>
                                <button @click="applyText" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded">
                                    应用文字
                                </button>
                            </div>
                        </div>

                        <!-- 输出操作 -->
                        <div v-if="finalImage" class="glass-effect rounded-xl p-6">
                            <h2 class="text-xl font-semibold text-white mb-4">💾 保存和分享</h2>
                            <div class="flex space-x-3">
                                <button @click="downloadImage" class="flex-1 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded">
                                    📥 下载图片
                                </button>
                                <button @click="copyToClipboard" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                                    📋 复制图片
                                </button>
                                <button @click="resetAll" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded">
                                    🔄 重置
                                </button>
                                <button @click="showHistory = !showHistory" class="bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded">
                                    {{ showHistory ? '隐藏历史' : '查看历史' }}
                                </button>
                                <button @click="showAPIConfig = !showAPIConfig" class="bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded">
                                    {{ showAPIConfig ? '关闭配置' : 'API配置' }}
                                </button>
                            </div>
                        </div>

                        <!-- 生成历史记录 -->
                        <div v-if="showHistory" class="glass-effect rounded-xl p-6">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-xl font-semibold text-white">📚 生成历史</h2>
                                <button @click="clearHistory" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm">
                                    清空历史
                                </button>
                            </div>
                            
                            <!-- 历史统计 -->
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                                <div class="bg-white/10 rounded-lg p-3 text-center">
                                    <div class="text-2xl font-bold text-white">{{ generationHistory.length }}</div>
                                    <div class="text-white/70 text-sm">总生成数</div>
                                </div>
                                <div class="bg-white/10 rounded-lg p-3 text-center">
                                    <div class="text-lg font-bold text-white">{{ getMostUsedModel() }}</div>
                                    <div class="text-white/70 text-sm">常用模型</div>
                                </div>
                                <div class="bg-white/10 rounded-lg p-3 text-center">
                                    <div class="text-lg font-bold text-white">{{ getMostUsedStyle() }}</div>
                                    <div class="text-white/70 text-sm">常用风格</div>
                                </div>
                                <div class="bg-white/10 rounded-lg p-3 text-center">
                                    <div class="text-2xl font-bold text-white">{{ getAverageQuality() }}</div>
                                    <div class="text-white/70 text-sm">平均质量</div>
                                </div>
                            </div>

                            <!-- 历史列表 -->
                            <div class="max-h-64 overflow-y-auto space-y-2">
                                <div v-for="(item, index) in generationHistory.slice().reverse()" :key="index" class="bg-white/10 rounded-lg p-3 flex items-center space-x-3">
                                    <img :src="item.image" alt="历史图片" class="w-16 h-16 object-cover rounded cursor-pointer" @click="loadHistoryImage(item)">
                                    <div class="flex-1 text-white">
                                        <div class="font-medium truncate">{{ item.description }}</div>
                                        <div class="text-sm text-white/70">{{ item.modelName }} • {{ item.styleName }} • {{ formatDate(item.timestamp) }}</div>
                                        <div class="text-sm text-white/70">质量: {{ item.quality }}/100</div>
                                    </div>
                                    <button @click="deleteHistoryItem(index)" class="text-red-400 hover:text-red-300">
                                        🗑️
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- API配置界面 -->
                        <div v-if="showAPIConfig" class="glass-effect rounded-xl p-6">
                            <h2 class="text-xl font-semibold text-white mb-4">🔑 API配置</h2>
                            
                            <!-- 配置状态 -->
                            <div class="mb-4 p-3 bg-white/10 rounded-lg">
                                <div class="text-white text-sm mb-2">配置状态:</div>
                                <div class="space-y-1">
                                    <div class="flex justify-between items-center">
                                        <span class="text-white/70">OpenAI (DALL-E)</span>
                                        <span :class="apiKeys.openai ? 'text-green-400' : 'text-red-400'">{{ apiKeys.openai ? '已配置' : '未配置' }}</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-white/70">Stability AI</span>
                                        <span :class="apiKeys.stability ? 'text-green-400' : 'text-red-400'">{{ apiKeys.stability ? '已配置' : '未配置' }}</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-white/70">Midjourney</span>
                                        <span :class="apiKeys.midjourney ? 'text-green-400' : 'text-red-400'">{{ apiKeys.midjourney ? '已配置' : '未配置' }}</span>
                                    </div>
                                </div>
                            </div>

                            <!-- API密钥输入 -->
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-white mb-2">OpenAI API Key</label>
                                    <input 
                                        type="password" 
                                        v-model="apiKeys.openai" 
                                        placeholder="sk-..."
                                        class="w-full p-2 rounded border border-gray-300 focus:border-blue-500"
                                    >
                                </div>
                                <div>
                                    <label class="block text-white mb-2">Stability AI API Key</label>
                                    <input 
                                        type="password" 
                                        v-model="apiKeys.stability" 
                                        placeholder="sk-..."
                                        class="w-full p-2 rounded border border-gray-300 focus:border-blue-500"
                                    >
                                </div>
                                <div>
                                    <label class="block text-white mb-2">Midjourney API Key</label>
                                    <input 
                                        type="password" 
                                        v-model="apiKeys.midjourney" 
                                        placeholder="mj-..."
                                        class="w-full p-2 rounded border border-gray-300 focus:border-blue-500"
                                    >
                                </div>
                            </div>

                            <!-- 操作按钮 -->
                            <div class="flex space-x-3 mt-4">
                                <button @click="saveAPIKeys" class="flex-1 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded">
                                    💾 保存配置
                                </button>
                                <button @click="testAPIConnection" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                                    🔍 测试连接
                                </button>
                                <button @click="clearAPIKeys" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded">
                                    🗑️ 清空
                                </button>
                            </div>

                            <!-- 安全提示 -->
                            <div class="mt-4 p-3 bg-yellow-500/20 border border-yellow-500/50 rounded-lg">
                                <div class="text-yellow-200 text-sm">
                                    <strong>🔒 安全提示:</strong> API密钥仅保存在您的浏览器本地，不会上传到任何服务器。
                                </div>
                            </div>
                        </div>

                        <!-- 自定义API配置界面 -->
                        <div v-if="showAPIConfig" class="glass-effect rounded-xl p-6 mt-6">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-xl font-semibold text-white">🛠️ 自定义API配置</h2>
                                <div class="flex gap-2">
                                    <button @click="importCustomAPIs" 
                                            class="px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600 transition-colors">
                                        导入
                                    </button>
                                    <button @click="exportCustomAPIs" 
                                            class="px-3 py-1 bg-purple-500 text-white rounded text-sm hover:bg-purple-600 transition-colors"
                                            :disabled="customAPIs.length === 0">
                                        导出
                                    </button>
                                    <button @click="clearAllCustomAPIs" 
                                            class="px-3 py-1 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors"
                                            :disabled="customAPIs.length === 0">
                                        清空
                                    </button>
                                    <button @click="showCustomAPIForm = !showCustomAPIForm" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm">
                                        {{ showCustomAPIForm ? '取消添加' : '添加新接口' }}
                                    </button>
                                </div>
                            </div>

                            <!-- 自定义API表单 -->
                            <div v-if="showCustomAPIForm" class="mb-6 p-4 bg-white/10 rounded-lg">
                                <h3 class="text-lg font-medium text-white mb-4">添加自定义API接口</h3>
                                <div class="space-y-4">
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-white mb-2">接口名称 *</label>
                                            <input 
                                                type="text" 
                                                v-model="customAPIForm.name" 
                                                placeholder="例如：我的AI服务"
                                                class="w-full p-2 rounded border border-gray-300 focus:border-blue-500"
                                                :class="{'border-red-500': customAPIForm.errors.name}"
                                            >
                                            <div v-if="customAPIForm.errors.name" class="text-red-400 text-sm mt-1">{{ customAPIForm.errors.name }}</div>
                                        </div>
                                        <div>
                                            <label class="block text-white mb-2">请求方法 *</label>
                                            <select 
                                                v-model="customAPIForm.method" 
                                                class="w-full p-2 rounded border border-gray-300 focus:border-blue-500"
                                                :class="{'border-red-500': customAPIForm.errors.method}"
                                            >
                                                <option value="">选择请求方法</option>
                                                <option value="GET">GET</option>
                                                <option value="POST">POST</option>
                                                <option value="PUT">PUT</option>
                                                <option value="DELETE">DELETE</option>
                                            </select>
                                            <div v-if="customAPIForm.errors.method" class="text-red-400 text-sm mt-1">{{ customAPIForm.errors.method }}</div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-white mb-2">API端点 *</label>
                                        <input 
                                            type="url" 
                                            v-model="customAPIForm.endpoint" 
                                            placeholder="https://api.example.com/v1/generate"
                                            class="w-full p-2 rounded border border-gray-300 focus:border-blue-500"
                                            :class="{'border-red-500': customAPIForm.errors.endpoint}"
                                        >
                                        <div v-if="customAPIForm.errors.endpoint" class="text-red-400 text-sm mt-1">{{ customAPIForm.errors.endpoint }}</div>
                                    </div>

                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-white mb-2">认证类型</label>
                                            <select 
                                                v-model="customAPIForm.authType" 
                                                class="w-full p-2 rounded border border-gray-300 focus:border-blue-500"
                                            >
                                                <option value="none">无认证</option>
                                                <option value="bearer">Bearer Token</option>
                                                <option value="apikey">API Key</option>
                                                <option value="basic">Basic Auth</option>
                                            </select>
                                        </div>
                                        <div v-if="customAPIForm.authType !== 'none'">
                                            <label class="block text-white mb-2">
                                                {{ customAPIForm.authType === 'bearer' ? 'Bearer Token' : 
                                                   customAPIForm.authType === 'apikey' ? 'API Key' : 
                                                   customAPIForm.authType === 'basic' ? '用户名:密码' : '认证信息' }}
                                            </label>
                                            <input 
                                                :type="customAPIForm.authType === 'basic' ? 'text' : 'password'" 
                                                v-model="customAPIForm.authValue" 
                                                :placeholder="customAPIForm.authType === 'bearer' ? 'Bearer your-token' : 
                                                            customAPIForm.authType === 'apikey' ? 'your-api-key' : 
                                                            customAPIForm.authType === 'basic' ? 'username:password' : ''"
                                                class="w-full p-2 rounded border border-gray-300 focus:border-blue-500"
                                            >
                                        </div>
                                    </div>

                                    <div>
                                        <label class="block text-white mb-2">请求参数 (JSON格式)</label>
                                        <textarea 
                                            v-model="customAPIForm.parameters" 
                                            placeholder='{"prompt": "{{description}}", "size": "{{size}}"}'
                                            rows="4"
                                            class="w-full p-2 rounded border border-gray-300 focus:border-blue-500"
                                            :class="{'border-red-500': customAPIForm.errors.parameters}"
                                        ></textarea>
                                        <div v-if="customAPIForm.errors.parameters" class="text-red-400 text-sm mt-1">{{ customAPIForm.errors.parameters }}</div>
                                        <div class="text-white/70 text-sm mt-1">
                                            支持变量: {{description}}, {{size}}, {{style}}, {{steps}}, {{guidance}}
                                        </div>
                                    </div>

                                    <div>
                                        <label class="block text-white mb-2">响应数据路径</label>
                                        <input 
                                            type="text" 
                                            v-model="customAPIForm.responsePath" 
                                            placeholder="data.image_url 或 result.0.url"
                                            class="w-full p-2 rounded border border-gray-300 focus:border-blue-500"
                                        >
                                        <div class="text-white/70 text-sm mt-1">
                                            指定响应中图片URL的路径，例如：data.image_url
                                        </div>
                                    </div>

                                    <div class="flex space-x-3">
                                        <button @click="testCustomAPI" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded" :disabled="isTestingCustomAPI">
                                            <div v-if="isTestingCustomAPI" class="loading-spinner inline-block w-4 h-4 mr-2"></div>
                                            {{ isTestingCustomAPI ? '测试中...' : '🔍 测试接口' }}
                                        </button>
                                        <button @click="saveCustomAPI" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">
                                            💾 保存接口
                                        </button>
                                        <button @click="resetCustomAPIForm" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded">
                                            🔄 重置
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- 已保存的自定义API列表 -->
                            <div v-if="customAPIs.length > 0">
                                <h3 class="text-lg font-medium text-white mb-4">已配置的自定义接口</h3>
                                <div class="space-y-3">
                                    <div v-for="(api, index) in customAPIs" :key="index" class="bg-white/10 rounded-lg p-4">
                                        <div class="flex justify-between items-start">
                                            <div class="flex-1">
                                                <div class="flex items-center space-x-2 mb-2">
                                                    <span class="text-white font-medium">{{ api.name }}</span>
                                                    <span class="px-2 py-1 bg-blue-500/30 text-blue-200 text-xs rounded">{{ api.method }}</span>
                                                    <span :class="api.status === 'active' ? 'text-green-400' : api.status === 'error' ? 'text-red-400' : 'text-yellow-400'">
                                                        {{ api.status === 'active' ? '✅ 正常' : api.status === 'error' ? '❌ 异常' : '⚠️ 未测试' }}
                                                    </span>
                                                </div>
                                                <div class="text-white/70 text-sm mb-1">{{ api.endpoint }}</div>
                                                <div class="text-white/50 text-xs">认证: {{ api.authType === 'none' ? '无' : api.authType === 'bearer' ? 'Bearer Token' : api.authType === 'apikey' ? 'API Key' : 'Basic Auth' }}</div>
                                                <div v-if="api.lastError" class="text-red-400 text-xs mt-1">{{ api.lastError }}</div>
                                            </div>
                                            <div class="flex space-x-2">
                                                <button @click="duplicateCustomAPI(index)" class="text-yellow-400 hover:text-yellow-300 text-sm">
                                                    📋 复制
                                                </button>
                                                <button @click="editCustomAPI(index)" class="text-blue-400 hover:text-blue-300 text-sm">
                                                    ✏️ 编辑
                                                </button>
                                                <button @click="testSingleCustomAPI(index)" class="text-green-400 hover:text-green-300 text-sm" :disabled="isTestingCustomAPI">
                                                    🔍 测试
                                                </button>
                                                <button @click="deleteCustomAPI(index)" class="text-red-400 hover:text-red-300 text-sm">
                                                    🗑️ 删除
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 空状态 -->
                            <div v-else class="text-center py-8">
                                <div class="text-white/50 mb-4">🔧</div>
                                <div class="text-white/70">还没有配置自定义API接口</div>
                                <div class="text-white/50 text-sm">点击上方"添加新接口"开始配置</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 画布（隐藏） -->
        <canvas ref="canvas" style="display: none;"></canvas>
    </div>

    <!-- API配置管理 -->
    <script src="api-config.js"></script>
    <script src="meme-generator.js"></script>
</body>
</html>