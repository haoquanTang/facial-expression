<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI è¡¨æƒ…åŒ…ç”Ÿæˆå™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .hover-scale {
            transition: transform 0.2s ease;
        }
        .hover-scale:hover {
            transform: scale(1.05);
        }
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            max-width: 400px;
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        .fade-enter-active, .fade-leave-active {
            transition: opacity 0.3s;
        }
        .fade-enter-from, .fade-leave-to {
            opacity: 0;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <div id="app">
        <!-- é€šçŸ¥ç³»ç»Ÿ -->
        <transition name="fade">
            <div v-if="notification.show" :class="['notification', 'p-4', 'rounded-lg', 'shadow-lg', 'text-white', notification.type === 'success' ? 'bg-green-500' : notification.type === 'error' ? 'bg-red-500' : 'bg-blue-500']">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <span v-if="notification.type === 'success'" class="mr-2">âœ…</span>
                        <span v-else-if="notification.type === 'error'" class="mr-2">âŒ</span>
                        <span v-else class="mr-2">â„¹ï¸</span>
                        <span>{{ notification.message }}</span>
                    </div>
                    <button @click="hideNotification" class="ml-4 text-white hover:text-gray-200">
                        âœ•
                    </button>
                </div>
            </div>
        </transition>

        <div class="container mx-auto px-4 py-8">
            <!-- æ ‡é¢˜ -->
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-white mb-2">ğŸ­ AI è¡¨æƒ…åŒ…ç”Ÿæˆå™¨</h1>
                <p class="text-white/80">è®©AIä¸ºä½ çš„èŠå¤©å¢æ·»è‰²å½©</p>
            </div>

            <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
            <div class="max-w-6xl mx-auto">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- å·¦ä¾§ï¼šè¾“å…¥å’Œæ§åˆ¶é¢æ¿ -->
                    <div class="space-y-6">
                        <!-- æè¿°è¾“å…¥ -->
                        <div class="glass-effect rounded-xl p-6">
                            <h2 class="text-xl font-semibold text-white mb-4">ğŸ“ æè¿°ä½ æƒ³è¦çš„è¡¨æƒ…åŒ…</h2>
                            <textarea 
                                v-model="description" 
                                placeholder="ä¾‹å¦‚ï¼šä¸€åªå¯çˆ±çš„å°çŒ«å’ªåœ¨æ‰“å­—ï¼Œè¡¨æƒ…å¾ˆä¸“æ³¨"
                                class="w-full h-24 p-3 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 resize-none"
                            ></textarea>
                        </div>

                        <!-- é£æ ¼é€‰æ‹© -->
                        <div class="glass-effect rounded-xl p-6">
                            <h2 class="text-xl font-semibold text-white mb-4">ğŸ¨ é€‰æ‹©é£æ ¼</h2>
                            <div class="grid grid-cols-2 gap-3">
                                <button 
                                    v-for="style in styleTemplates" 
                                    :key="style.id"
                                    @click="selectedStyle = style.id"
                                    :class="['p-3 rounded-lg text-left transition-all hover-scale', selectedStyle === style.id ? 'bg-blue-500 text-white' : 'bg-white/20 text-white hover:bg-white/30']"
                                >
                                    <div class="font-medium">{{ style.emoji }} {{ style.name }}</div>
                                    <div class="text-sm opacity-80">{{ style.description }}</div>
                                </button>
                            </div>
                        </div>

                        <!-- AIæ¨¡å‹é€‰æ‹© -->
                        <div class="glass-effect rounded-xl p-6">
                            <h2 class="text-xl font-semibold text-white mb-4">ğŸ¤– AIæ¨¡å‹é€‰æ‹©</h2>
                            <div class="space-y-3">
                                <div v-for="model in aiModels" :key="model.id" class="flex items-center justify-between p-3 bg-white/10 rounded-lg">
                                    <div class="flex items-center">
                                        <input 
                                            type="checkbox" 
                                            :id="model.id" 
                                            v-model="selectedModels" 
                                            :value="model.id"
                                            class="mr-3 w-4 h-4 text-blue-600 rounded focus:ring-blue-500"
                                        >
                                        <label :for="model.id" class="text-white font-medium">{{ model.name }}</label>
                                    </div>
                                    <div class="text-sm text-white/70">{{ model.description }}</div>
                                </div>
                            </div>
                        </div>

                        <!-- é«˜çº§å‚æ•° -->
                        <div class="glass-effect rounded-xl p-6">
                            <h2 class="text-xl font-semibold text-white mb-4">âš™ï¸ é«˜çº§å‚æ•°</h2>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-white mb-2">å›¾ç‰‡å°ºå¯¸</label>
                                    <select v-model="parameters.size" class="w-full p-2 rounded-lg border border-gray-300 focus:border-blue-500">
                                        <option value="512x512">512x512 (æ ‡å‡†)</option>
                                        <option value="768x768">768x768 (é«˜æ¸…)</option>
                                        <option value="1024x1024">1024x1024 (è¶…é«˜æ¸…)</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-white mb-2">é‡‡æ ·æ­¥æ•°: {{ parameters.steps }}</label>
                                    <input type="range" v-model="parameters.steps" min="10" max="50" class="w-full">
                                </div>
                                <div>
                                    <label class="block text-white mb-2">å¼•å¯¼ç³»æ•°: {{ parameters.guidance }}</label>
                                    <input type="range" v-model="parameters.guidance" min="1" max="20" step="0.5" class="w-full">
                                </div>
                                <div>
                                    <label class="block text-white mb-2">è´Ÿé¢æç¤ºè¯</label>
                                    <input 
                                        v-model="parameters.negativePrompt" 
                                        placeholder="ä¾‹å¦‚ï¼šæ¨¡ç³Šã€ä½è´¨é‡ã€å˜å½¢"
                                        class="w-full p-2 rounded-lg border border-gray-300 focus:border-blue-500"
                                    >
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- å³ä¾§ï¼šç”Ÿæˆç»“æœå’Œæ“ä½œ -->
                    <div class="space-y-6">
                        <!-- ç”ŸæˆæŒ‰é’® -->
                        <div class="glass-effect rounded-xl p-6">
                            <div class="flex space-x-3">
                                <button 
                                    @click="generateSingleImage" 
                                    :disabled="isGenerating || !description.trim() || selectedModels.length === 0"
                                    class="flex-1 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg transition-colors flex items-center justify-center"
                                >
                                    <div v-if="isGenerating" class="loading-spinner mr-2"></div>
                                    {{ isGenerating ? 'ç”Ÿæˆä¸­...' : 'ç”Ÿæˆå›¾ç‰‡' }}
                                </button>
                                <button 
                                    @click="generateParallelImages" 
                                    :disabled="isGenerating || !description.trim() || selectedModels.length < 2"
                                    class="flex-1 bg-purple-500 hover:bg-purple-600 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg transition-colors"
                                >
                                    å¹¶è¡Œç”Ÿæˆå¯¹æ¯”
                                </button>
                            </div>
                        </div>

                        <!-- ç”Ÿæˆç»“æœå±•ç¤º -->
                        <div class="glass-effect rounded-xl p-6">
                            <h2 class="text-xl font-semibold text-white mb-4">ğŸ–¼ï¸ ç”Ÿæˆç»“æœ</h2>
                            
                            <!-- å•ä¸ªç»“æœ -->
                            <div v-if="generatedImage && !showParallelResults" class="text-center">
                                <div class="relative inline-block">
                                    <img :src="generatedImage" alt="ç”Ÿæˆçš„å›¾ç‰‡" class="max-w-full h-auto rounded-lg shadow-lg">
                                    <div v-if="imageQuality" class="absolute top-2 right-2 bg-black/70 text-white px-2 py-1 rounded text-sm">
                                        è´¨é‡è¯„åˆ†: {{ imageQuality }}/100
                                    </div>
                                </div>
                            </div>

                            <!-- å¹¶è¡Œç»“æœ -->
                            <div v-if="showParallelResults && parallelResults.length > 0" class="space-y-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div v-for="(result, index) in parallelResults" :key="index" class="relative">
                                        <div class="bg-white/10 rounded-lg p-3">
                                            <div class="text-white text-sm mb-2 flex justify-between items-center">
                                                <span>{{ result.modelName }}</span>
                                                <span class="bg-blue-500 px-2 py-1 rounded text-xs">{{ result.quality }}/100</span>
                                            </div>
                                            <img :src="result.image" alt="ç”Ÿæˆçš„å›¾ç‰‡" class="w-full h-auto rounded cursor-pointer hover:opacity-80" @click="selectParallelResult(index)">
                                        </div>
                                    </div>
                                </div>
                                <div class="text-center text-white/70 text-sm">
                                    ç‚¹å‡»å›¾ç‰‡é€‰æ‹©æœ€ä½³ç»“æœ
                                </div>
                            </div>

                            <!-- ç©ºçŠ¶æ€ -->
                            <div v-if="!generatedImage && !showParallelResults" class="text-center text-white/60 py-12">
                                <div class="text-6xl mb-4">ğŸ¨</div>
                                <p>è¾“å…¥æè¿°å¹¶é€‰æ‹©æ¨¡å‹å¼€å§‹ç”Ÿæˆ</p>
                            </div>
                        </div>

                        <!-- æ–‡å­—ç¼–è¾‘ -->
                        <div v-if="generatedImage" class="glass-effect rounded-xl p-6">
                            <h2 class="text-xl font-semibold text-white mb-4">âœï¸ æ·»åŠ æ–‡å­—</h2>
                            <div class="space-y-4">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-white mb-2">ä¸Šæ–¹æ–‡å­—</label>
                                        <input v-model="textSettings.topText" placeholder="è¾“å…¥ä¸Šæ–¹æ–‡å­—" class="w-full p-2 rounded border">
                                    </div>
                                    <div>
                                        <label class="block text-white mb-2">ä¸‹æ–¹æ–‡å­—</label>
                                        <input v-model="textSettings.bottomText" placeholder="è¾“å…¥ä¸‹æ–¹æ–‡å­—" class="w-full p-2 rounded border">
                                    </div>
                                </div>
                                <div class="grid grid-cols-3 gap-4">
                                    <div>
                                        <label class="block text-white mb-2">å­—ä½“å¤§å°</label>
                                        <input type="range" v-model="textSettings.fontSize" min="20" max="80" class="w-full">
                                        <span class="text-white text-sm">{{ textSettings.fontSize }}px</span>
                                    </div>
                                    <div>
                                        <label class="block text-white mb-2">æ–‡å­—é¢œè‰²</label>
                                        <input type="color" v-model="textSettings.color" class="w-full h-10 rounded">
                                    </div>
                                    <div>
                                        <label class="block text-white mb-2">é˜´å½±å¼ºåº¦</label>
                                        <input type="range" v-model="textSettings.shadowBlur" min="0" max="10" class="w-full">
                                        <span class="text-white text-sm">{{ textSettings.shadowBlur }}px</span>
                                    </div>
                                </div>
                                <button @click="applyText" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded">
                                    åº”ç”¨æ–‡å­—
                                </button>
                            </div>
                        </div>

                        <!-- è¾“å‡ºæ“ä½œ -->
                        <div v-if="finalImage" class="glass-effect rounded-xl p-6">
                            <h2 class="text-xl font-semibold text-white mb-4">ğŸ’¾ ä¿å­˜å’Œåˆ†äº«</h2>
                            <div class="flex space-x-3">
                                <button @click="downloadImage" class="flex-1 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded">
                                    ğŸ“¥ ä¸‹è½½å›¾ç‰‡
                                </button>
                                <button @click="copyToClipboard" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                                    ğŸ“‹ å¤åˆ¶å›¾ç‰‡
                                </button>
                                <button @click="resetAll" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded">
                                    ğŸ”„ é‡ç½®
                                </button>
                                <button @click="showHistory = !showHistory" class="bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded">
                                    {{ showHistory ? 'éšè—å†å²' : 'æŸ¥çœ‹å†å²' }}
                                </button>
                                <button @click="showAPIConfig = !showAPIConfig" class="bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded">
                                    {{ showAPIConfig ? 'å…³é—­é…ç½®' : 'APIé…ç½®' }}
                                </button>
                            </div>
                        </div>

                        <!-- ç”Ÿæˆå†å²è®°å½• -->
                        <div v-if="showHistory" class="glass-effect rounded-xl p-6">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-xl font-semibold text-white">ğŸ“š ç”Ÿæˆå†å²</h2>
                                <button @click="clearHistory" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm">
                                    æ¸…ç©ºå†å²
                                </button>
                            </div>
                            
                            <!-- å†å²ç»Ÿè®¡ -->
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                                <div class="bg-white/10 rounded-lg p-3 text-center">
                                    <div class="text-2xl font-bold text-white">{{ generationHistory.length }}</div>
                                    <div class="text-white/70 text-sm">æ€»ç”Ÿæˆæ•°</div>
                                </div>
                                <div class="bg-white/10 rounded-lg p-3 text-center">
                                    <div class="text-lg font-bold text-white">{{ getMostUsedModel() }}</div>
                                    <div class="text-white/70 text-sm">å¸¸ç”¨æ¨¡å‹</div>
                                </div>
                                <div class="bg-white/10 rounded-lg p-3 text-center">
                                    <div class="text-lg font-bold text-white">{{ getMostUsedStyle() }}</div>
                                    <div class="text-white/70 text-sm">å¸¸ç”¨é£æ ¼</div>
                                </div>
                                <div class="bg-white/10 rounded-lg p-3 text-center">
                                    <div class="text-2xl font-bold text-white">{{ getAverageQuality() }}</div>
                                    <div class="text-white/70 text-sm">å¹³å‡è´¨é‡</div>
                                </div>
                            </div>

                            <!-- å†å²åˆ—è¡¨ -->
                            <div class="max-h-64 overflow-y-auto space-y-2">
                                <div v-for="(item, index) in generationHistory.slice().reverse()" :key="index" class="bg-white/10 rounded-lg p-3 flex items-center space-x-3">
                                    <img :src="item.image" alt="å†å²å›¾ç‰‡" class="w-16 h-16 object-cover rounded cursor-pointer" @click="loadHistoryImage(item)">
                                    <div class="flex-1 text-white">
                                        <div class="font-medium truncate">{{ item.description }}</div>
                                        <div class="text-sm text-white/70">{{ item.modelName }} â€¢ {{ item.styleName }} â€¢ {{ formatDate(item.timestamp) }}</div>
                                        <div class="text-sm text-white/70">è´¨é‡: {{ item.quality }}/100</div>
                                    </div>
                                    <button @click="deleteHistoryItem(index)" class="text-red-400 hover:text-red-300">
                                        ğŸ—‘ï¸
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- APIé…ç½®ç•Œé¢ -->
                        <div v-if="showAPIConfig" class="glass-effect rounded-xl p-6">
                            <h2 class="text-xl font-semibold text-white mb-4">ğŸ”‘ APIé…ç½®</h2>
                            
                            <!-- é…ç½®çŠ¶æ€ -->
                            <div class="mb-4 p-3 bg-white/10 rounded-lg">
                                <div class="text-white text-sm mb-2">é…ç½®çŠ¶æ€:</div>
                                <div class="space-y-1">
                                    <div class="flex justify-between items-center">
                                        <span class="text-white/70">OpenAI (DALL-E)</span>
                                        <span :class="apiKeys.openai ? 'text-green-400' : 'text-red-400'">{{ apiKeys.openai ? 'å·²é…ç½®' : 'æœªé…ç½®' }}</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-white/70">Stability AI</span>
                                        <span :class="apiKeys.stability ? 'text-green-400' : 'text-red-400'">{{ apiKeys.stability ? 'å·²é…ç½®' : 'æœªé…ç½®' }}</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-white/70">Midjourney</span>
                                        <span :class="apiKeys.midjourney ? 'text-green-400' : 'text-red-400'">{{ apiKeys.midjourney ? 'å·²é…ç½®' : 'æœªé…ç½®' }}</span>
                                    </div>
                                </div>
                            </div>

                            <!-- APIå¯†é’¥è¾“å…¥ -->
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-white mb-2">OpenAI API Key</label>
                                    <input 
                                        type="password" 
                                        v-model="apiKeys.openai" 
                                        placeholder="sk-..."
                                        class="w-full p-2 rounded border border-gray-300 focus:border-blue-500"
                                    >
                                </div>
                                <div>
                                    <label class="block text-white mb-2">Stability AI API Key</label>
                                    <input 
                                        type="password" 
                                        v-model="apiKeys.stability" 
                                        placeholder="sk-..."
                                        class="w-full p-2 rounded border border-gray-300 focus:border-blue-500"
                                    >
                                </div>
                                <div>
                                    <label class="block text-white mb-2">Midjourney API Key</label>
                                    <input 
                                        type="password" 
                                        v-model="apiKeys.midjourney" 
                                        placeholder="mj-..."
                                        class="w-full p-2 rounded border border-gray-300 focus:border-blue-500"
                                    >
                                </div>
                            </div>

                            <!-- æ“ä½œæŒ‰é’® -->
                            <div class="flex space-x-3 mt-4">
                                <button @click="saveAPIKeys" class="flex-1 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded">
                                    ğŸ’¾ ä¿å­˜é…ç½®
                                </button>
                                <button @click="testAPIConnection" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                                    ğŸ” æµ‹è¯•è¿æ¥
                                </button>
                                <button @click="clearAPIKeys" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded">
                                    ğŸ—‘ï¸ æ¸…ç©º
                                </button>
                            </div>

                            <!-- å®‰å…¨æç¤º -->
                            <div class="mt-4 p-3 bg-yellow-500/20 border border-yellow-500/50 rounded-lg">
                                <div class="text-yellow-200 text-sm">
                                    <strong>ğŸ”’ å®‰å…¨æç¤º:</strong> APIå¯†é’¥ä»…ä¿å­˜åœ¨æ‚¨çš„æµè§ˆå™¨æœ¬åœ°ï¼Œä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨ã€‚
                                </div>
                            </div>
                        </div>

                        <!-- è‡ªå®šä¹‰APIé…ç½®ç•Œé¢ -->
                        <div v-if="showAPIConfig" class="glass-effect rounded-xl p-6 mt-6">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-xl font-semibold text-white">ğŸ› ï¸ è‡ªå®šä¹‰APIé…ç½®</h2>
                                <div class="flex gap-2">
                                    <button @click="importCustomAPIs" 
                                            class="px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600 transition-colors">
                                        å¯¼å…¥
                                    </button>
                                    <button @click="exportCustomAPIs" 
                                            class="px-3 py-1 bg-purple-500 text-white rounded text-sm hover:bg-purple-600 transition-colors"
                                            :disabled="customAPIs.length === 0">
                                        å¯¼å‡º
                                    </button>
                                    <button @click="clearAllCustomAPIs" 
                                            class="px-3 py-1 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors"
                                            :disabled="customAPIs.length === 0">
                                        æ¸…ç©º
                                    </button>
                                    <button @click="showCustomAPIForm = !showCustomAPIForm" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm">
                                        {{ showCustomAPIForm ? 'å–æ¶ˆæ·»åŠ ' : 'æ·»åŠ æ–°æ¥å£' }}
                                    </button>
                                </div>
                            </div>

                            <!-- è‡ªå®šä¹‰APIè¡¨å• -->
                            <div v-if="showCustomAPIForm" class="mb-6 p-4 bg-white/10 rounded-lg">
                                <h3 class="text-lg font-medium text-white mb-4">æ·»åŠ è‡ªå®šä¹‰APIæ¥å£</h3>
                                <div class="space-y-4">
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-white mb-2">æ¥å£åç§° *</label>
                                            <input 
                                                type="text" 
                                                v-model="customAPIForm.name" 
                                                placeholder="ä¾‹å¦‚ï¼šæˆ‘çš„AIæœåŠ¡"
                                                class="w-full p-2 rounded border border-gray-300 focus:border-blue-500"
                                                :class="{'border-red-500': customAPIForm.errors.name}"
                                            >
                                            <div v-if="customAPIForm.errors.name" class="text-red-400 text-sm mt-1">{{ customAPIForm.errors.name }}</div>
                                        </div>
                                        <div>
                                            <label class="block text-white mb-2">è¯·æ±‚æ–¹æ³• *</label>
                                            <select 
                                                v-model="customAPIForm.method" 
                                                class="w-full p-2 rounded border border-gray-300 focus:border-blue-500"
                                                :class="{'border-red-500': customAPIForm.errors.method}"
                                            >
                                                <option value="">é€‰æ‹©è¯·æ±‚æ–¹æ³•</option>
                                                <option value="GET">GET</option>
                                                <option value="POST">POST</option>
                                                <option value="PUT">PUT</option>
                                                <option value="DELETE">DELETE</option>
                                            </select>
                                            <div v-if="customAPIForm.errors.method" class="text-red-400 text-sm mt-1">{{ customAPIForm.errors.method }}</div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-white mb-2">APIç«¯ç‚¹ *</label>
                                        <input 
                                            type="url" 
                                            v-model="customAPIForm.endpoint" 
                                            placeholder="https://api.example.com/v1/generate"
                                            class="w-full p-2 rounded border border-gray-300 focus:border-blue-500"
                                            :class="{'border-red-500': customAPIForm.errors.endpoint}"
                                        >
                                        <div v-if="customAPIForm.errors.endpoint" class="text-red-400 text-sm mt-1">{{ customAPIForm.errors.endpoint }}</div>
                                    </div>

                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-white mb-2">è®¤è¯ç±»å‹</label>
                                            <select 
                                                v-model="customAPIForm.authType" 
                                                class="w-full p-2 rounded border border-gray-300 focus:border-blue-500"
                                            >
                                                <option value="none">æ— è®¤è¯</option>
                                                <option value="bearer">Bearer Token</option>
                                                <option value="apikey">API Key</option>
                                                <option value="basic">Basic Auth</option>
                                            </select>
                                        </div>
                                        <div v-if="customAPIForm.authType !== 'none'">
                                            <label class="block text-white mb-2">
                                                {{ customAPIForm.authType === 'bearer' ? 'Bearer Token' : 
                                                   customAPIForm.authType === 'apikey' ? 'API Key' : 
                                                   customAPIForm.authType === 'basic' ? 'ç”¨æˆ·å:å¯†ç ' : 'è®¤è¯ä¿¡æ¯' }}
                                            </label>
                                            <input 
                                                :type="customAPIForm.authType === 'basic' ? 'text' : 'password'" 
                                                v-model="customAPIForm.authValue" 
                                                :placeholder="customAPIForm.authType === 'bearer' ? 'Bearer your-token' : 
                                                            customAPIForm.authType === 'apikey' ? 'your-api-key' : 
                                                            customAPIForm.authType === 'basic' ? 'username:password' : ''"
                                                class="w-full p-2 rounded border border-gray-300 focus:border-blue-500"
                                            >
                                        </div>
                                    </div>

                                    <div>
                                        <label class="block text-white mb-2">è¯·æ±‚å‚æ•° (JSONæ ¼å¼)</label>
                                        <textarea 
                                            v-model="customAPIForm.parameters" 
                                            placeholder='{"prompt": "{{description}}", "size": "{{size}}"}'
                                            rows="4"
                                            class="w-full p-2 rounded border border-gray-300 focus:border-blue-500"
                                            :class="{'border-red-500': customAPIForm.errors.parameters}"
                                        ></textarea>
                                        <div v-if="customAPIForm.errors.parameters" class="text-red-400 text-sm mt-1">{{ customAPIForm.errors.parameters }}</div>
                                        <div class="text-white/70 text-sm mt-1">
                                            æ”¯æŒå˜é‡: {{description}}, {{size}}, {{style}}, {{steps}}, {{guidance}}
                                        </div>
                                    </div>

                                    <div>
                                        <label class="block text-white mb-2">å“åº”æ•°æ®è·¯å¾„</label>
                                        <input 
                                            type="text" 
                                            v-model="customAPIForm.responsePath" 
                                            placeholder="data.image_url æˆ– result.0.url"
                                            class="w-full p-2 rounded border border-gray-300 focus:border-blue-500"
                                        >
                                        <div class="text-white/70 text-sm mt-1">
                                            æŒ‡å®šå“åº”ä¸­å›¾ç‰‡URLçš„è·¯å¾„ï¼Œä¾‹å¦‚ï¼šdata.image_url
                                        </div>
                                    </div>

                                    <div class="flex space-x-3">
                                        <button @click="testCustomAPI" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded" :disabled="isTestingCustomAPI">
                                            <div v-if="isTestingCustomAPI" class="loading-spinner inline-block w-4 h-4 mr-2"></div>
                                            {{ isTestingCustomAPI ? 'æµ‹è¯•ä¸­...' : 'ğŸ” æµ‹è¯•æ¥å£' }}
                                        </button>
                                        <button @click="saveCustomAPI" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">
                                            ğŸ’¾ ä¿å­˜æ¥å£
                                        </button>
                                        <button @click="resetCustomAPIForm" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded">
                                            ğŸ”„ é‡ç½®
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- å·²ä¿å­˜çš„è‡ªå®šä¹‰APIåˆ—è¡¨ -->
                            <div v-if="customAPIs.length > 0">
                                <h3 class="text-lg font-medium text-white mb-4">å·²é…ç½®çš„è‡ªå®šä¹‰æ¥å£</h3>
                                <div class="space-y-3">
                                    <div v-for="(api, index) in customAPIs" :key="index" class="bg-white/10 rounded-lg p-4">
                                        <div class="flex justify-between items-start">
                                            <div class="flex-1">
                                                <div class="flex items-center space-x-2 mb-2">
                                                    <span class="text-white font-medium">{{ api.name }}</span>
                                                    <span class="px-2 py-1 bg-blue-500/30 text-blue-200 text-xs rounded">{{ api.method }}</span>
                                                    <span :class="api.status === 'active' ? 'text-green-400' : api.status === 'error' ? 'text-red-400' : 'text-yellow-400'">
                                                        {{ api.status === 'active' ? 'âœ… æ­£å¸¸' : api.status === 'error' ? 'âŒ å¼‚å¸¸' : 'âš ï¸ æœªæµ‹è¯•' }}
                                                    </span>
                                                </div>
                                                <div class="text-white/70 text-sm mb-1">{{ api.endpoint }}</div>
                                                <div class="text-white/50 text-xs">è®¤è¯: {{ api.authType === 'none' ? 'æ— ' : api.authType === 'bearer' ? 'Bearer Token' : api.authType === 'apikey' ? 'API Key' : 'Basic Auth' }}</div>
                                                <div v-if="api.lastError" class="text-red-400 text-xs mt-1">{{ api.lastError }}</div>
                                            </div>
                                            <div class="flex space-x-2">
                                                <button @click="duplicateCustomAPI(index)" class="text-yellow-400 hover:text-yellow-300 text-sm">
                                                    ğŸ“‹ å¤åˆ¶
                                                </button>
                                                <button @click="editCustomAPI(index)" class="text-blue-400 hover:text-blue-300 text-sm">
                                                    âœï¸ ç¼–è¾‘
                                                </button>
                                                <button @click="testSingleCustomAPI(index)" class="text-green-400 hover:text-green-300 text-sm" :disabled="isTestingCustomAPI">
                                                    ğŸ” æµ‹è¯•
                                                </button>
                                                <button @click="deleteCustomAPI(index)" class="text-red-400 hover:text-red-300 text-sm">
                                                    ğŸ—‘ï¸ åˆ é™¤
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ç©ºçŠ¶æ€ -->
                            <div v-else class="text-center py-8">
                                <div class="text-white/50 mb-4">ğŸ”§</div>
                                <div class="text-white/70">è¿˜æ²¡æœ‰é…ç½®è‡ªå®šä¹‰APIæ¥å£</div>
                                <div class="text-white/50 text-sm">ç‚¹å‡»ä¸Šæ–¹"æ·»åŠ æ–°æ¥å£"å¼€å§‹é…ç½®</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç”»å¸ƒï¼ˆéšè—ï¼‰ -->
        <canvas ref="canvas" style="display: none;"></canvas>
    </div>

    <!-- APIé…ç½®ç®¡ç† -->
    <script src="api-config.js"></script>
    <script src="meme-generator.js"></script>
</body>
</html>